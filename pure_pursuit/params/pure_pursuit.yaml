pure_pursuit:
  ros__parameters:
    # --- Corner recognition (HEAVY) ---
    corner_enable: true
    corner_side_deg: 45.0		#40
    corner_ransac_iters: 120		
    corner_ransac_tol: 0.05
    corner_min_inliers: 20
    corner_angle_thresh_deg: 25.0
    corner_intersect_max: 3.0
    corner_circle_use: true
    corner_circle_Rmax: 6.0
    corner_ema_alpha: 0.35
    corner_on_cycles: 3
    corner_off_cycles: 5

    # --- Debug (RViz / rqt_plot) ---
    corner_debug_markers: true        # RViz MarkerArray(/pp_debug/markers) 출력
    corner_debug_frame: "base_link0"   # RViz Fixed Frame과 일치시키세요

    # --- Topics ---
    odom_topic: "/odom0"
    drive_topic: "/ackermann_cmd0"
    ttc_scan_topic: "/scan_front"
    center_path_topic: "/center_path"   # ★ 추가: 경로 토픽명
    left_path_topic: "/left_boundary"     # ★ 추가: 좌 경계(파라미터 키 이름 주의)
    right_path_topic: "/right_boundary"   # ★ 추가: 우 경계(파라미터 키 이름 주의)

    # --- Speed caps (직선 하드캡) ---
    speed_min: 1.0
    speed_max: 9.0

    # --- Vehicle / cornering (곡률 → 속도 제한 via ay) ---
    wheelbase: 0.34
    ay_max: 9.0

    # --- Dynamic lookahead (속도 기반) ---
    lookahead: 1.5          # 코드에 선언돼 있어 기본값 명시(실제는 ld0/kv_ld 사용)
    ld0: 1.2
    kv_ld: 0.22
    ld_min: 0.8
    ld_max: 2.0

    # --- TTC gating (위협일 때만 개입) ---
    ttc_gate: 1.1
    ttc_safe: 0.9
    k_ttc: 8.0

    # --- TTC 필터(벽/옆면 오인 억제) ---
    ttc_fov_deg: 12.0		#12
    ttc_corridor_half: 0.35	#0.35

    # --- v_ref shaping (부드럽게 + 급감속 억제) ---
    tau_v: 0.10
    a_ref_up: 6.0
    a_ref_down: 3.5
    v_deadband: 0.15

    # --- Longitudinal control (가속 P제어) ---
    k_accel: 5.0
    accel_max: 9.0
    accel_min: -4.0

    # --- 코너 완화 노브(곡률 가중치) ---
    curv_gain_speed: 0.80

    # --- (옵션) k_speed: 사용 안 해도 됨(코드상 미사용) ---
    k_speed: 2.5

